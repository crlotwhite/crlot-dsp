package(default_visibility = ["//visibility:public"])

load("@rules_cc//cc:defs.bzl", "cc_library")

cc_library(
    name = "dr_libs",
    hdrs = glob(["dr_libs/**/*.h"]),
    includes = ["dr_libs"],
)

cc_library(
    name = "kissfft",
    srcs = [
        "kissfft/kiss_fft.c",
        "kissfft/kiss_fftr.c",
        "kissfft/kiss_fftnd.c",
        "kissfft/kiss_fftndr.c",
    ],
    hdrs = [
        "kissfft/kiss_fft.h",
        "kissfft/kiss_fftr.h",
        "kissfft/kiss_fftnd.h",
        "kissfft/kiss_fftndr.h",
        "kissfft/_kiss_fft_guts.h",
        "kissfft/kiss_fft_log.h",
        "kissfft/kissfft.hh",
    ],
    defines = ["KISSFFT_DATATYPE=float"],
    strip_include_prefix = "kissfft",
    copts = ["-Wno-unused-variable"],  # 경고 억제
)

cc_library(
    name = "r8brain-free",
    srcs = [
        "r8brain-free/pffft.cpp",
        "r8brain-free/r8bbase.cpp",
    ],
    hdrs = glob([
        "r8brain-free/*.h",
        "r8brain-free/*.inc",
    ]),
    strip_include_prefix = "r8brain-free",
    copts = [
        "-Wno-unused-variable",
        "-Wno-unused-function",
        "-Wno-vla-cxx-extension",
    ],
)
